(function(e){function t(t){for(var n,r,o=t[0],m=t[1],l=t[2],h=0,c=[];h<o.length;h++)r=o[h],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&c.push(a[r][0]),a[r]=0;for(n in m)Object.prototype.hasOwnProperty.call(m,n)&&(e[n]=m[n]);u&&u(t);while(c.length)c.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],n=!0,o=1;o<s.length;o++){var m=s[o];0!==a[m]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=s[0]))}return e}var n={},a={app:0},i=[];function r(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=n,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/swiss-system/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],m=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=m;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";s("85ec")},1819:function(e,t,s){},2615:function(e,t,s){"use strict";s("1819")},"502c":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"banner"}),s("Swiss")],1)},i=[],r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"swiss"},[s("nav",[s("button",{staticClass:"reset",on:{click:e.reset}},[e._v("Reset")]),e.started&&!e.finalsMode?s("button",{staticClass:"previous",attrs:{disabled:e.round<2},on:{click:function(t){return e.prevRound()}}},[e._v("Tour précédent")]):e._e(),e.over?e._e():[e.started?e._e():s("button",{staticClass:"start",attrs:{disabled:e.teams.length<e.spots},on:{click:function(t){return e.start()}}},[e._v("Démarrer ("+e._s(e.teams.length)+")")]),e.started?s("button",{attrs:{disabled:e.missingResults},on:{click:function(t){return e.nextRound()}}},[e._v("Tour suivant")]):e._e()],e.over&&!e.finalsMode?s("button",{attrs:{disabled:e.missingResults},on:{click:function(t){return e.startFinals()}}},[e._v("Phases finales")]):e._e(),e.over&&e.playoffsOver?s("button",{on:{click:function(t){return e.showFinalStandings()}}},[e._v("Classement final")]):e._e()],2),s("main",[e.started?[e.finalsMode?[e.showResults?[s("Standings",{attrs:{teams:e.finalStandings,results:e.allResults,spots:"Main draw"===e.gameType?0:this.spots}})]:[s("Playoffs",{attrs:{teams:e.playoffsTeams,spots:e.remainingSpots,title:e.playoffsTitle},on:{ranking:e.getFinalStandings,loser:e.setSilverTeams,results:e.setAllResults}}),e.doConsolationBracket?s("Playoffs",{attrs:{teams:e.silverTeams,title:"Consolante"},on:{ranking:e.getSilverStandings}}):e._e()]]:[s("h2",[e._v("Rencontres tour "+e._s(e.round))]),s("p",[e._v(" Sélectionner le vainqueur de chaque match : ")]),s("table",{staticClass:"match-list"},[s("tbody",e._l(e.matches,(function(t,n){return s("tr",{key:t[0].name},[s("td",[s("b",[e._v("M"+e._s(n+1))])]),s("td",{staticClass:"left"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t[0].matches[e.round-1].win,expression:"m[0].matches[round - 1].win",modifiers:{number:!0}}],attrs:{id:t[0].name,type:"radio",name:t[0].name},domProps:{value:1,checked:e._q(t[0].matches[e.round-1].win,e._n(1))},on:{change:[function(s){e.$set(t[0].matches[e.round-1],"win",e._n(1))},function(s){return e.setMatchResult(n,t[0],t[1])}]}}),s("label",{class:{won:e.hasJustWon(t[0]),lost:e.hasJustLost(t[0])},attrs:{for:t[0].name}},[e._v(e._s(t[0].name))])]),e._m(1,!0),s("td",{staticClass:"right"},[s("label",{class:{won:e.hasJustWon(t[1]),lost:e.hasJustLost(t[1])},attrs:{for:t[1].name}},[e._v(e._s(t[1].name))]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t[1].matches[e.round-1].win,expression:"m[1].matches[round - 1].win",modifiers:{number:!0}}],attrs:{id:t[1].name,type:"radio",name:t[1].name},domProps:{value:1,checked:e._q(t[1].matches[e.round-1].win,e._n(1))},on:{change:[function(s){e.$set(t[1].matches[e.round-1],"win",e._n(1))},function(s){return e.setMatchResult(n,t[1],t[0])}]}})])])})),0)])],e._v(" "),s("h2",[e._v("Classement poule Suisse")]),s("table",{attrs:{id:"ranking"}},[s("thead",[s("tr",{staticStyle:{"text-align":"center"}},[s("th",[e._v("Rang")]),s("th",[e._v("Équipe")]),s("th",[e._v("Victoires")]),s("th",{attrs:{title:"Somme des victoires des adversaires (solkoff)"}},[e._v("SVA")]),s("th",{attrs:{title:"Somme cumulée des victoires"}},[e._v("Cumul.")]),e._l(e.teams[0].matches,(function(t,n){return s("th",{key:t.against},[e._v(" Tour "+e._s(n+1)+" ")])}))],2)]),s("tbody",e._l(e.rankedTeams,(function(t,n){return s("tr",{key:t.name,staticStyle:{"text-align":"center"}},[s("td",[e._v(e._s(n>0&&e.nbWins(t)===e.nbWins(e.rankedTeams[n-1])&&e.solkoff(t)===e.solkoff(e.rankedTeams[n-1])&&e.cumulative(t)===e.cumulative(e.rankedTeams[n-1])?"-":n+1))]),s("td",[e._v(e._s(t.name))]),s("td",[e._v(e._s(e.nbWins(t)))]),s("td",[e._v(e._s(e.solkoff(t)))]),s("td",[e._v(e._s(e.cumulative(t)))]),e._l(t.matches,(function(t){return s("td",{key:t.against,class:{won:1===t.win,lost:-1===t.win}},[-1!==t.against?s("span",[e._v(" "+e._s(e.teams[t.against].name))]):s("span",[e._v("-")])])}))],2)})),0)])]:[s("h3",[e._v("Configuration du tournoi")]),s("div",{staticClass:"config"},[e._v(" Type de tournoi : "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.gameType,expression:"gameType"}],attrs:{type:"radio",id:"qualif",value:"Qualif"},domProps:{checked:e._q(e.gameType,"Qualif")},on:{change:function(t){e.gameType="Qualif"}}}),s("label",{attrs:{for:"qualif"}},[e._v("Qualif")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.gameType,expression:"gameType"}],attrs:{type:"radio",id:"maindraw",value:"Main draw"},domProps:{checked:e._q(e.gameType,"Main draw")},on:{change:function(t){e.gameType="Main draw"}}}),s("label",{attrs:{for:"maindraw"}},[e._v("Main draw")])]),s("div",{staticClass:"config"},[s("label",{attrs:{for:"maxRounds"}},[e._v("Nb. tours poule suisse :")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.maxRounds,expression:"maxRounds"}],attrs:{id:"maxRounds",type:"number",name:"maxRounds"},domProps:{value:e.maxRounds},on:{input:function(t){t.target.composing||(e.maxRounds=t.target.value)}}})]),s("div",{staticClass:"config"},[s("label",{attrs:{for:"spots"}},[e._v("Nb. équipes qualifiées :")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.spots,expression:"spots"}],attrs:{id:"spots",type:"number",name:"spots"},domProps:{value:e.spots},on:{input:function(t){t.target.composing||(e.spots=t.target.value)}}})]),s("div",{staticClass:"config"},[e._v(" Consolante : "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.wantConso,expression:"wantConso"}],attrs:{type:"radio",id:"conso"},domProps:{value:!0,checked:e._q(e.wantConso,!0)},on:{change:function(t){e.wantConso=!0}}}),s("label",{attrs:{for:"conso"}},[e._v("Oui")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.wantConso,expression:"wantConso"}],attrs:{type:"radio",id:"noConso"},domProps:{value:!1,checked:e._q(e.wantConso,!1)},on:{change:function(t){e.wantConso=!1}}}),s("label",{attrs:{for:"NoConso"}},[e._v("Non")])]),s("div",{staticClass:"config"},[s("label",{attrs:{for:"nbFields"}},[e._v("Nb. terrains disponibles :")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.nbFields,expression:"nbFields"}],attrs:{id:"nbFields",type:"number",name:"nbFields"},domProps:{value:e.nbFields},on:{input:function(t){t.target.composing||(e.nbFields=t.target.value)}}})]),s("div",{staticClass:"config"},[s("label",{attrs:{for:"matchDuration"}},[e._v("Durée d'un match (min) :")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.matchDuration,expression:"matchDuration"}],attrs:{id:"matchDuration",type:"number",name:"matchDuration"},domProps:{value:e.matchDuration},on:{input:function(t){t.target.composing||(e.matchDuration=t.target.value)}}})]),s("div",[e._v(" Durée estimée du tournoi : "+e._s(e.duration)+" min ")]),s("h3",[e._v("Ajout des équipes")]),s("form",{on:{submit:function(t){return t.preventDefault(),e.addTeam.apply(null,arguments)}}},[s("label",{attrs:{for:"name"}},[e._v("Nom :")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.name,expression:"name",modifiers:{trim:!0}}],attrs:{id:"name",type:"text",name:"name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("label",{attrs:{for:"score"}},[e._v("Score :")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.score,expression:"score",modifiers:{number:!0}}],staticClass:"score",attrs:{id:"score",type:"number",name:"score"},domProps:{value:e.score},on:{input:function(t){t.target.composing||(e.score=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),s("button",[e._v("Ajouter équipe")])]),s("table",{staticClass:"team-list"},[e._m(0),s("tbody",e._l(e.orderedTeams,(function(t,n){return s("tr",{key:t.name},[s("td",{staticClass:"cell-align-center"},[e._v(e._s(n+1))]),s("td",[e._v(e._s(t.name))]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:t.score,expression:"team.score",modifiers:{number:!0,lazy:!0}}],staticClass:"score",attrs:{id:"score-"+n,type:"number",name:"score"},domProps:{value:t.score},on:{change:function(s){e.$set(t,"score",e._n(s.target.value))},blur:function(t){return e.$forceUpdate()}}})]),s("td",{staticClass:"cell-align-center"},[s("button",{staticClass:"delete",staticStyle:{float:"none"},on:{click:function(t){return e.removeTeam(n)}}},[e._v("Supprimer")])])])})),0)])]],2)])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("Rang")]),s("th",[e._v("Équipe")]),s("th",[e._v("Score")]),s("th",[e._v("Action")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("b",[e._v("VS")])])}],m=(s("99af"),s("4de4"),s("7db0"),s("4160"),s("a630"),s("d81d"),s("13d5"),s("fb6a"),s("45fc"),s("a434"),s("b0c0"),s("a9e3"),s("ac1f"),s("3ca3"),s("5319"),s("159b"),s("e58a")),l=s.n(m),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"playoffs"}},[s("h2",[e._v(e._s(e.title)),s("span",{directives:[{name:"show",rawName:"v-show",value:e.spots,expression:"spots"}]},[e._v(" (pour "+e._s(e.spots)+" places qualificatives)")])]),s("div",{attrs:{id:"bracket"}},[e.hasLast16?s("ul",{staticClass:"round round-1"},[e._l(e.lastSixteens,(function(t,n){return[s("li",{key:t[0].name},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t[2],expression:"p[2]",modifiers:{number:!0}}],attrs:{id:"r0"+t[0].name,type:"radio",name:t[0].name},domProps:{value:1,checked:e._q(t[2],e._n(1))},on:{change:[function(s){e.$set(t,2,e._n(1))},function(t){return e.setQuarterFinals(n)}]}}),s("label",{class:{won:1===t[2],lost:-1===t[2]},attrs:{for:"r0"+t[0].name}},[e._v(e._s(t[0].name))])]),s("li",{key:t[1].name},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t[2],expression:"p[2]",modifiers:{number:!0}},{name:"show",rawName:"v-show",value:!e.isFictiveName(t[1].name),expression:"!isFictiveName(p[1].name)"}],attrs:{id:"r0"+t[1].name,type:"radio",name:t[1].name},domProps:{value:-1,checked:e._q(t[2],e._n(-1))},on:{change:[function(s){e.$set(t,2,e._n(-1))},function(t){return e.setQuarterFinals(n)}]}}),s("label",{class:{won:-1===t[2],lost:1===t[2]},attrs:{for:"r0"+t[1].name}},[e._v(e._s(t[1].name))])])]}))],2):e._e(),s("ul",{staticClass:"round",class:e.hasLast16?"round-2":"round-1"},[e._l(e.quarterFinals,(function(t,n){return[s("li",{key:t[0].name},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t[2],expression:"p[2]",modifiers:{number:!0}}],attrs:{id:"r1"+t[0].name,type:"radio",name:t[0].name},domProps:{value:1,checked:e._q(t[2],e._n(1))},on:{change:[function(s){e.$set(t,2,e._n(1))},function(t){return e.setSemiFinals(n)}]}}),s("label",{class:{won:1===t[2],lost:-1===t[2]},attrs:{for:"r1"+t[0].name}},[e._v(e._s(t[0].name))])]),s("li",{key:t[1].name},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t[2],expression:"p[2]",modifiers:{number:!0}},{name:"show",rawName:"v-show",value:!e.isFictiveName(t[1].name),expression:"!isFictiveName(p[1].name)"}],attrs:{id:"r1"+t[1].name,type:"radio",name:t[1].name},domProps:{value:-1,checked:e._q(t[2],e._n(-1))},on:{change:[function(s){e.$set(t,2,e._n(-1))},function(t){return e.setSemiFinals(n)}]}}),s("label",{class:{won:-1===t[2],lost:1===t[2]},attrs:{for:"r1"+t[1].name}},[e._v(e._s(t[1].name))])])]}))],2),s("ul",{staticClass:"round",class:e.hasLast16?"round-3":"round-2"},[e._l(e.semiFinals,(function(t,n){return[s("li",{key:t[0].name},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t[2],expression:"s[2]",modifiers:{number:!0}},{name:"show",rawName:"v-show",value:e.semifinalNeeded,expression:"semifinalNeeded"}],attrs:{id:"semi"+t[0].name,type:"radio",name:t[0].name},domProps:{value:1,checked:e._q(t[2],e._n(1))},on:{change:[function(s){e.$set(t,2,e._n(1))},function(t){return e.setFinals(n)}]}}),s("label",{class:{won:!e.semifinalNeeded||1===t[2],lost:-1===t[2]},attrs:{for:"semi"+t[0].name}},[e._v(e._s(t[0].name))])]),s("li",{key:t[1].name},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t[2],expression:"s[2]",modifiers:{number:!0}},{name:"show",rawName:"v-show",value:e.semifinalNeeded,expression:"semifinalNeeded"}],attrs:{id:"semi"+t[1].name,type:"radio",name:t[1].name},domProps:{value:-1,checked:e._q(t[2],e._n(-1))},on:{change:[function(s){e.$set(t,2,e._n(-1))},function(t){return e.setFinals(n)}]}}),s("label",{class:{won:!e.semifinalNeeded||-1===t[2],lost:1===t[2]},attrs:{for:"semi"+t[1].name}},[e._v(e._s(t[1].name))])])]}))],2),e.semifinalNeeded?s("ul",{staticClass:"round finals",class:e.hasLast16?"round-4":""},[e._l(e.finals,(function(t,n){return[s("li",{key:t[0].name},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t[2],expression:"f[2]",modifiers:{number:!0}},{name:"show",rawName:"v-show",value:e.finalNeeded(n),expression:"finalNeeded(idx)"}],attrs:{id:"final"+t[0].name,type:"radio",name:t[0].name},domProps:{value:1,checked:e._q(t[2],e._n(1))},on:{change:[function(s){e.$set(t,2,e._n(1))},function(t){return e.setWinner(n)}]}}),s("label",{class:{won:!e.finalNeeded(n)||1===t[2],lost:-1===t[2]},attrs:{for:"final"+t[0].name}},[e._v(e._s(t[0].name))])]),s("li",{key:t[1].name},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t[2],expression:"f[2]",modifiers:{number:!0}},{name:"show",rawName:"v-show",value:e.finalNeeded(n),expression:"finalNeeded(idx)"}],attrs:{id:"final"+t[1].name,type:"radio",name:t[1].name},domProps:{value:-1,checked:e._q(t[2],e._n(-1))},on:{change:[function(s){e.$set(t,2,e._n(-1))},function(t){return e.setWinner(n)}]}}),s("label",{class:{won:!e.finalNeeded(n)||-1===t[2],lost:1===t[2]},attrs:{for:"final"+t[1].name}},[e._v(e._s(t[1].name))])])]}))],2):e._e(),e.semifinalNeeded?s("ul",{staticClass:"round winners",class:e.hasLast16?"round-5":""},e._l(e.winners,(function(t){return s("li",{key:t},[e._v(" "+e._s(t))])})),0):e._e()])])},h=[],c={name:"Playoffs",props:{teams:{type:Array,required:!0},title:{type:String,default:"Phases finales"},spots:{type:Number,default:0}},emits:["loser","ranking","results"],data:function(){return{lastSixteens:[],quarterFinals:[[{name:"Winner 1st 8th-final"},{name:"Winner 2nd 8th-final"},0],[{name:"Winner 3rd 8th-final"},{name:"Winner 4th 8th-final"},0],[{name:"Winner 5th 8th-final"},{name:"Winner 6th 8th-final"},0],[{name:"Winner 7th 8th-final"},{name:"Winner 8th 8th-final"},0]],semiFinals:[[{name:"Winner 1st quarterfinal"},{name:"Winner 2nd quarterfinal"},0],[{name:"Winner 3rd quarterfinal"},{name:"Winner 4th quarterfinal"},0]],finals:[[{name:"Winner 1st semifinal"},{name:"Winner 2nd semifinal"},0],[{name:"Loser 1st semifinal"},{name:"Loser 2nd semifinal"},0]],winners:["Winner","3rd place"]}},mounted:function(){this.updateMatches()},computed:{hasLast16:function(){return this.teams.length>8},semifinalNeeded:function(){return this.spots<4}},methods:{updateMatches:function(){this.teams.length<=8?(this.quarterFinals=[],this.teams.length>=8?this.quarterFinals.push([this.teams[0],this.teams[7],0]):(this.quarterFinals.push([this.teams[0],{name:" -"},1]),this.setSemiFinals(0)),this.teams.length>=5?this.quarterFinals.push([this.teams[3],this.teams[4],0]):(this.quarterFinals.push([this.teams[3],{name:"    -"},1]),this.setSemiFinals(1)),this.teams.length>=6?this.quarterFinals.push([this.teams[2],this.teams[5],0]):(this.quarterFinals.push([this.teams[2],{name:"   -"},1]),this.setSemiFinals(2)),this.teams.length>=7?this.quarterFinals.push([this.teams[1],this.teams[6],0]):(this.quarterFinals.push([this.teams[1],{name:"  -"},1]),this.setSemiFinals(3))):(this.teams.length>=16?this.lastSixteens.push([this.teams[0],this.teams[15],0]):(this.lastSixteens.push([this.teams[0],{name:"-"},1]),this.setQuarterFinals(0)),this.teams.length>=9?this.lastSixteens.push([this.teams[7],this.teams[8],0]):(this.lastSixteens.push([this.teams[7],{name:"-       "},1]),this.setQuarterFinals(1)),this.teams.length>=12?this.lastSixteens.push([this.teams[4],this.teams[11],0]):(this.lastSixteens.push([this.teams[4],{name:"-    "},1]),this.setQuarterFinals(2)),this.teams.length>=13?this.lastSixteens.push([this.teams[3],this.teams[12],0]):(this.lastSixteens.push([this.teams[3],{name:"-   "},1]),this.setQuarterFinals(3)),this.teams.length>=14?this.lastSixteens.push([this.teams[2],this.teams[13],0]):(this.lastSixteens.push([this.teams[2],{name:"-  "},1]),this.setQuarterFinals(4)),this.teams.length>=11?this.lastSixteens.push([this.teams[5],this.teams[10],0]):(this.lastSixteens.push([this.teams[5],{name:"-     "},1]),this.setQuarterFinals(5)),this.teams.length>=10?this.lastSixteens.push([this.teams[6],this.teams[9],0]):(this.lastSixteens.push([this.teams[6],{name:"-      "},1]),this.setQuarterFinals(6)),this.teams.length>=15?this.lastSixteens.push([this.teams[1],this.teams[14],0]):(this.lastSixteens.push([this.teams[1],{name:"- "},1]),this.setQuarterFinals(7))),this.spots>=3&&(this.winners=[" - ","Qualified #3"],this.finals[0]=[{name:"Qualified #1"},{name:"Qualified #2"},0]),this.spots>=4&&(this.winners=[],this.finals=[],this.semiFinals=[[{name:"Qualified #1"},{name:"Qualified #2"},0],[{name:"Qualified #3"},{name:"Qualified #4"},0]])},finalNeeded:function(e){switch(this.spots){case 0:case 1:return!0;case 2:return!1;case 3:return e>0;default:return!1}},setNextRound:function(e,t,s){1===t[e][2]?s[Math.floor(e/2)][e%2].name=t[e][0].name:s[Math.floor(e/2)][e%2].name=t[e][1].name},setQuarterFinals:function(e){var t=this;this.setNextRound(e,this.lastSixteens,this.quarterFinals);var s=[];this.lastSixteens.forEach((function(e){1!==e[2]||t.isFictiveName(e[1].name)||s.push(e[1]),-1===e[2]&&s.push(e[0])})),this.$emit("loser",s)},setSemiFinals:function(e){var t=this;if(this.setNextRound(e,this.quarterFinals,this.semiFinals),this.spots>=4){var s=[this.semiFinals[0][0].name,this.semiFinals[0][1].name,this.semiFinals[1][0].name,this.semiFinals[1][1].name];this.quarterFinals.forEach((function(e){1===e[2]?t.isFictiveName(e[1].name)||s.push(e[1].name):s.push(e[0].name)})),this.teams.length>8&&this.lastSixteens.forEach((function(e){1===e[2]?t.isFictiveName(e[1].name)||s.push(e[1].name):s.push(e[0].name)})),this.$emit("ranking",s)}},setFinals:function(e){this.setNextRound(e,this.semiFinals,this.finals),-1===this.semiFinals[e][2]?this.finals[1][e%2].name=this.semiFinals[e][0].name:this.finals[1][e%2].name=this.semiFinals[e][1].name},setWinner:function(e){var t=this;1===this.finals[e][2]?this.winners[e]=this.finals[e][0].name:this.winners[e]=this.finals[e][1].name;var s=[];this.spots<2&&s.push(this.winners[0]),-1!==this.finals[0][2]&&3!==this.spots||s.push(this.finals[0][0].name),1!==this.finals[0][2]&&3!==this.spots||s.push(this.finals[0][1].name),s.push(this.winners[1]),-1===this.finals[1][2]&&s.push(this.finals[1][0].name),1===this.finals[1][2]&&s.push(this.finals[1][1].name),this.quarterFinals.forEach((function(e){1===e[2]?t.isFictiveName(e[1].name)||s.push(e[1].name):s.push(e[0].name)})),this.teams.length>8&&this.lastSixteens.forEach((function(e){1===e[2]?t.isFictiveName(e[1].name)||s.push(e[1].name):s.push(e[0].name)})),this.$emit("ranking",s),this.publishAllResults()},isFictiveName:function(e){return/^[- ]+$/.test(e)},publishAllResults:function(){var e=this,t=[];this.teams.length>8&&this.lastSixteens.forEach((function(s){1===s[2]?e.isFictiveName(s[1].name)||t.push([s[0].name,s[1].name]):t.push([s[1].name,s[0].name])})),this.quarterFinals.forEach((function(s){1===s[2]?e.isFictiveName(s[1].name)||t.push([s[0].name,s[1].name]):t.push([s[1].name,s[0].name])})),this.semiFinals.forEach((function(s){1===s[2]?e.isFictiveName(s[1].name)||t.push([s[0].name,s[1].name]):t.push([s[1].name,s[0].name])})),1===this.finals[1][2]?t.push([this.finals[1][0].name,this.finals[1][1].name]):t.push([this.finals[1][1].name,this.finals[1][0].name]),1===this.finals[0][2]?t.push([this.finals[0][0].name,this.finals[0][1].name]):t.push([this.finals[0][1].name,this.finals[0][0].name]),this.$emit("results",t)}},watch:{teams:"updateMatches"}},d=c,f=(s("abf5"),s("2877")),p=Object(f["a"])(d,u,h,!1,null,"1ca57ffb",null),v=p.exports,g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"standings"}},[s("h2",[e._v("Classement final")]),s("button",{on:{click:e.downloadToCSV}},[e._v("Télécharger les résultats")]),s("ol",e._l(e.teams,(function(t,n){return s("li",{key:t.name,class:{qualified:n<e.spots},attrs:{value:t.rank}},[e._v(" "+e._s(t.name)+" ")])})),0)])},_=[],b=s("21a6"),w=s("369b"),S={name:"Standings",props:{teams:{type:Array,required:!0},results:{type:Array,required:!0},spots:{type:Number,default:0}},methods:{downloadToCSV:function(){var e="\ufeff"+Object(w["unparse"])(this.results),t=new Blob([e],{type:"application/csvcharset=utf-8"});Object(b["saveAs"])(t,"results.csv")}}},y=S,x=(s("2615"),Object(f["a"])(y,g,_,!1,null,"12ea79f0",null)),k=x.exports,F={name:"Swiss",components:{Playoffs:v,Standings:k},data:function(){return{started:!1,over:!1,playoffsOver:!1,showResults:!1,wantConso:!0,teams:[],playoffsTeams:[],silverTeams:[],finalStandings:[],silverStandings:[],remainingSpots:0,spots:11,finalsMode:!1,gameType:"Main draw",graph:null,matches:[],allResults:[],maxRounds:4,nbFields:4,matchDuration:30,name:"",score:0}},mounted:function(){if(localStorage.getItem("teams")){try{this.teams=JSON.parse(localStorage.getItem("teams")),this.matches=JSON.parse(localStorage.getItem("matches")),this.maxRounds=Math.floor(Number(localStorage.getItem("max-rounds")))||4,this.gameType=localStorage.getItem("game-type")||"Main draw",this.spots=Math.floor(Number(localStorage.getItem("spots")))||11}catch(e){console.warning("error while loading local storage",e.message),localStorage.removeItem("teams"),localStorage.removeItem("matches"),localStorage.removeItem("max-rounds"),localStorage.removeItem("game-type"),localStorage.removeItem("spots")}this.started="true"===localStorage.getItem("started"),this.wantConso="true"===localStorage.getItem("want-conso"),this.round>=this.maxRounds&&(this.over=!0)}},computed:{round:function(){return 0===this.teams.length?0:this.teams[0].matches?this.teams[0].matches.length:0},duration:function(){if(0==this.nbFields||0===this.teams.length)return"0";var e=(Math.ceil(this.teams.length/2/this.nbFields)*this.maxRounds+2+Math.ceil(Math.max(0,this.spots-4)/this.nbFields)+(this.wantConso?1:0))*this.matchDuration*60,t=new Date(1e3*e);return t.toISOString().substr(11,5).replace(/^[0:]+/,"").replace(":","h")},doConsolationBracket:function(){return this.wantConso&&"Main draw"===this.gameType},playoffsTitle:function(){return this.doConsolationBracket?"Principale":"Phases finales"},missingResults:function(){var e=this;return this.teams.some((function(t){return!t.matches||t.matches[e.round-1].against>-1&&0===t.matches[e.round-1].win}))},orderedTeams:function(){return Array.from(this.teams).sort((function(e,t){return t.score-e.score}))},rankedTeams:function(){var e=this;return Array.from(this.teams).sort((function(t,s){var n=e.nbWins(t),a=e.nbWins(s),i=e.solkoff(t),r=e.solkoff(s);return n===a?i===r?e.cumulative(s)-e.cumulative(t):r-i:a-n}))}},methods:{addTeam:function(){this.name&&(this.teams.push({name:this.name,score:this.score}),this.teams.sort((function(e,t){return t.score-e.score})),this.name="",this.score=0,this.saveTeams())},removeTeam:function(e){this.teams.splice(e,1),this.saveTeams()},saveTeams:function(){var e=JSON.stringify(this.teams);localStorage.setItem("teams",e)},saveMatches:function(){var e=JSON.stringify(this.matches);localStorage.setItem("matches",e)},hasJustWon:function(e){return 1===e.matches[this.round-1].win},hasJustLost:function(e){return-1===e.matches[this.round-1].win},nbWins:function(e){return e.matches?e.matches.reduce((function(e,t){return 1===t.win?++e:e}),0):0},solkoff:function(e){var t=this;return e.matches?e.matches.reduce((function(e,s){return e+t.nbWins(t.teams[s.against])}),0):0},cumulative:function(e){var t=this;return e.matches?e.matches.reduce((function(e,s,n){return 1===s.win?e+=t.round-n:e}),0):0},setMatchResult:function(e,t,s){var n=this.round-1,a=t.matches[n].against,i=s.matches[n].against;t.matches[n].win=this.teams[i].matches[n].win=1,s.matches[n].win=this.teams[a].matches[n].win=-1,this.saveTeams(),this.saveMatches()},start:function(){var e=this;if(this.teams){this.teams.sort((function(e,t){return t.score-e.score})),this.teams.length%2&&(console.log("Odd number of teams, adding a BYE team."),this.name="BYE",this.score=this.teams[this.teams.length-1].score,this.addTeam()),console.log("Start tournament. Do initial pairing according to score."),this.started=!0,this.graph=[];for(var t=0;t<this.teams.length/2;t++)this.graph.push([t,this.teams.length/2+t,1]);var s=l()(this.graph);this.teams.forEach((function(t,n){e.$set(t,"matches",[]),t.matches.push({against:s[n],win:0})}));var n=[];s.forEach((function(t,s){-1!==t&&s<t&&n.push([e.teams[s],e.teams[t]])})),n.sort((function(t,s){return e.nbWins(s[0])+e.nbWins(s[1])-e.nbWins(t[0])-e.nbWins(t[1])})),this.matches=n,localStorage.setItem("game-type",this.gameType),localStorage.setItem("want-conso",this.wantConso),localStorage.setItem("started",this.started),localStorage.setItem("max-rounds",this.maxRounds),localStorage.setItem("spots",this.spots),this.saveTeams(),this.saveMatches()}},prevRound:function(){var e=this;this.matches=[],this.teams.forEach((function(t,s){e.$delete(t.matches,t.matches.length-1);var n=t.matches[t.matches.length-1].against;s<n&&e.matches.push([e.teams[s],e.teams[n]])})),this.matches.sort((function(t,s){return e.nbWins(s[0])+e.nbWins(s[1])-e.nbWins(t[0])-e.nbWins(t[1])})),this.over=!1},nextRound:function(){var e=this;if(this.missingResults)console.warn("missing some match results");else if(this.graph=[],this.teams.forEach((function(t,s){for(var n=function(n){if(!t.matches.find((function(e){return e.against===n}))){var a=1,i=Math.abs(e.nbWins(t)-e.nbWins(e.teams[n])),r=Math.abs(s-n);0===i?a=140+r:1===i&&(a=100+r),e.graph.push([s,n,a])}},a=s+1;a<e.teams.length;a++)n(a)})),0!==this.graph.length){var t=l()(this.graph);this.teams.forEach((function(e,s){return e.matches.push({against:t[s],win:0})})),this.matches=[],t.forEach((function(t,s){-1!==t&&s<t&&e.matches.push([e.teams[s],e.teams[t]])})),this.matches.sort((function(t,s){return e.nbWins(s[0])+e.nbWins(s[1])-e.nbWins(t[0])-e.nbWins(t[1])})),this.round>=this.maxRounds&&(this.over=!0),this.saveTeams(),this.saveMatches()}else this.over=!0},startFinals:function(){var e=this;if(this.finalsMode=!0,this.playoffsTeams=[],"Main draw"===this.gameType){for(var t=0;t<Math.min(this.spots,this.teams.length);t++)this.playoffsTeams.push(this.rankedTeams[t]);this.silverTeams=this.rankedTeams.slice(this.spots);for(var s=8-this.silverTeams.length;s>0;--s)this.silverTeams.unshift({name:"Loser #"+s})}else(function(){var t=e.spots,s=e.nbWins(e.rankedTeams[0]);while(t>0&&0===e.playoffsTeams.length){var n=e.rankedTeams.filter((function(t){return e.nbWins(t)==s}));t<n.length?(e.playoffsTeams=n,e.remainingSpots=t):(--s,t-=n.length)}0===t&&(e.getFinalStandings([]),e.showFinalStandings())})()},setSilverTeams:function(e){this.silverTeams=e.concat(this.rankedTeams.slice(this.spots));for(var t=8-this.silverTeams.length;t>0;--t)this.silverTeams.unshift({name:"Loser #"+t})},getFinalStandings:function(e){var t=this;if(this.playoffsOver=!0,"Main draw"===this.gameType)this.finalStandings=e.map((function(e,t){return t<4?{rank:t+1,name:e}:t<8?{rank:5,name:e}:t<16?{rank:9,name:e}:void 0}));else{var s=this.spots-this.remainingSpots;this.finalStandings=this.rankedTeams.slice(0,s).map((function(e,t){return{rank:t+1,name:e.name}})).concat(e.map((function(e,n){return n<2?t.remainingSpots<2?{rank:n+s+1,name:e}:{rank:1+s,name:e}:n<4?t.remainingSpots<4?{rank:n+s+1,name:e}:{rank:1+s,name:e}:n<8?{rank:5+s,name:e}:n<16?{rank:9+s,name:e}:void 0})))}this.finalStandings.length<this.rankedTeams.length&&function(){var e=t.nbWins(t.rankedTeams[t.finalStandings.length]),s=t.finalStandings.length+1;while(e>=0&&t.finalStandings.length<t.teams.length){var n=t.rankedTeams.filter((function(s){return t.nbWins(s)===e})).map((function(e){return{rank:s,name:e.name}}));n.length>0&&(t.finalStandings=t.finalStandings.concat(n)),s+=n.length,e-=1}}()},setAllResults:function(e){var t=this;this.allResults=[];for(var s=function(e){t.rankedTeams.map((function(s){1===s.matches[e].win&&t.allResults.push([s.name,t.teams[s.matches[e].against].name])}))},n=0;n<this.round;++n)s(n);this.allResults=this.allResults.concat(e)},showFinalStandings:function(){this.showResults=!0},getSilverStandings:function(e){console.log("SilverResults",e)},reset:function(){var e=this;console.log("Reset."),this.started=!1,this.over=!1,this.finalsMode=!1,this.teams.forEach((function(t){return e.$delete(t,"matches")})),this.matches=[],localStorage.setItem("started",this.started),this.saveTeams(),this.saveMatches()}}},N=F,T=(s("c5b0"),Object(f["a"])(N,r,o,!1,null,"adb0f48a",null)),C=T.exports,q={name:"App",components:{Swiss:C}},R=q,W=(s("034f"),Object(f["a"])(R,a,i,!1,null,null,null)),M=W.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(M)}}).$mount("#app")},"85ec":function(e,t,s){},abf5:function(e,t,s){"use strict";s("502c")},bcaf:function(e,t,s){},c5b0:function(e,t,s){"use strict";s("bcaf")}});
//# sourceMappingURL=app.07b57b3d.js.map